<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>评论时间的不同显示（多少分钟前，多少小时前，昨天，月日）</title>
</head>
<body>
    <script>
        var pretime = "2020-01-03 16:57:10";
		
		var minute = 1000 * 60;
		var hour = minute * 60;
		var day = hour * 24;
		var halfamonth = day * 15;
		var month = day * 30;
		
		//这是第一次打开页面时调用
		getDate(pretime);
		
		//然后再每隔一分钟更新一次时间
		setInterval(function() {
		    getDate(pretime);
		}, 60000);
		
		function getDate(dateTimeStamp){
			
			if(dateTimeStamp==undefined){
				
				return false;
			}else{
				dateTimeStamp = dateTimeStamp.replace(/\-/g, "/");
				
				var sTime = new Date(dateTimeStamp).getTime();//把时间pretime的值转为时间戳
				
				var now = new Date().getTime();//获取当前时间的时间戳
				
				var diffValue = now - sTime;
				
				if(diffValue < 0){
					console.log("结束日期不能小于开始日期！");
				}
				
				var monthC =diffValue/month;
				var weekC =diffValue/(7*day);
				var dayC =diffValue/day;
				var hourC =diffValue/hour;
				var minC =diffValue/minute;
				
				if(monthC>=1){
					console.log(parseInt(monthC) + "个月前");
				}
				else if(weekC>=1){
					console.log(parseInt(weekC) + "周前")
				}
				else if(dayC>=1){
					console.log(parseInt(dayC) +"天前")
				}
				else if(hourC>=1){
					console.log(parseInt(hourC) +"个小时前")
				}
				else if(minC>=1){
					console.log(parseInt(minC) +"分钟前")
				}else{
					console.log("刚刚")
				}
			}
			
		}
    </script>
</body>
</html>